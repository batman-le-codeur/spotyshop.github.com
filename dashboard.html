<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recherche Affilié</title>
</head>
<body>
    <h2>Recherche Affilié</h2>

    <input type="text" id="nom" placeholder="Nom">
    <input type="text" id="numero" placeholder="Numéro">
    <button onclick="rechercher()">Rechercher</button>

    <pre id="resultat">Résultat affiché ici...</pre>

    <script>
        function rechercher() {
            const nom = document.getElementById('nom').value;
            const numero = document.getElementById('numero').value;

            if (!nom || !numero) {
                document.getElementById('resultat').textContent = "Veuillez entrer le nom et le numéro.";
                return;
            }

            fetch("https://script.google.com/macros/s/AKfycbz7nxVLqQGm4Xnvj6Bm2jCo64Ud_ANJp7VJ9hD6KieCm370Q5A1dHkvyLBtjjpr0Yk/exec", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    action: "search",
                    nom: nom,
                    numero: numero
                })
            })
            .then(response => response.json())
            .then(data => {
                // Affiche le JSON brut
                document.getElementById('resultat').textContent = JSON.stringify(data, null, 2);
            })
            .catch(err => {
                document.getElementById('resultat').textContent = "Erreur : " + err;
            });
        }
    </script>
</body>
</html>
